<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>State Promise Programs Map</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const XIcon = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const PromiseProgramsMap = () => {
            const [selectedState, setSelectedState] = useState(null);
            const [filterType, setFilterType] = useState('all');

            const programData = {
                'California': [
                    { name: 'California College Promise Program', type: 'Community College', eligibility: 'Resident, HS grad', costs: 'First dollar (enrollment fees)' }
                ],
                'Connecticut': [
                    { name: 'Pledge to Advance Connecticut', type: 'Community College', eligibility: 'Resident, HS grad', costs: 'Last dollar (tuition)' }
                ],
                'Delaware': [
                    { name: 'Student Excellence Equals Degree', type: 'Community College', eligibility: 'HS grad, GPA', costs: 'Last dollar (tuition)' }
                ],
                'Hawaii': [
                    { name: 'Hawaii Promise Scholarship', type: 'Community College', eligibility: 'Resident', costs: 'Last dollar (tuition/fees)' }
                ],
                'Maine': [
                    { name: 'Free College Scholarship', type: 'Community College', eligibility: 'HS grad (select years)', costs: 'Last dollar (tuition/fees)', note: 'Ending Class of 2025' }
                ],
                'Maryland': [
                    { name: 'Community College Promise Scholarship', type: 'Community College', eligibility: 'HS grad, GPA, Income <$100k', costs: 'Last dollar (tuition/fees) up to $5k' }
                ],
                'Massachusetts': [
                    { name: 'MassEducate', type: 'Community College', eligibility: 'Resident, citizen', costs: 'Last dollar (tuition/fees)' },
                    { name: 'MassReconnect', type: 'Adult/Age Focused', eligibility: 'Resident, 25yrs+', costs: 'Last dollar (tuition/fees)' }
                ],
                'Michigan': [
                    { name: 'Community College Guarantee', type: 'Community College', eligibility: 'Resident, citizen, HS grad', costs: 'Last dollar (tuition/fees)' },
                    { name: 'Michigan Reconnect', type: 'Adult/Age Focused', eligibility: 'Resident, HS grad, 21yrs+', costs: 'Last dollar (tuition/fees)' }
                ],
                'Nevada': [
                    { name: 'Nevada Promise Scholarship', type: 'Community College', eligibility: 'Resident, HS grad', costs: 'Last dollar (tuition/fees)' }
                ],
                'New Hampshire': [
                    { name: 'CCSNH Promise Program', type: 'Community College', eligibility: 'Pell eligible student', costs: 'Last dollar (tuition/fees)' }
                ],
                'New Jersey': [
                    { name: 'Community College Opportunity Grant', type: 'Community College', eligibility: 'Resident, income <$100k', costs: 'Last dollar (sliding scale)' },
                    { name: 'Garden State Guarantee', type: 'University', eligibility: 'Resident, Income <$65k', costs: 'Last dollar (tuition/fees)' }
                ],
                'Oregon': [
                    { name: 'Oregon Promise Grant', type: 'Community College', eligibility: 'Resident, HS grad, GPA, income SAI<$25K', costs: 'Last dollar (tuition/fees)' }
                ],
                'Rhode Island': [
                    { name: 'Rhode Island Promise', type: 'Community College', eligibility: 'Resident, HS grad, 18 yrs old', costs: 'Last dollar (tuition/fees)' }
                ],
                'Tennessee': [
                    { name: 'Tennessee Promise', type: 'Community College', eligibility: 'Resident, citizen, HS grad', costs: 'Last dollar (tuition/fees)' },
                    { name: 'Tennessee Reconnect', type: 'Adult/Age Focused', eligibility: 'Resident, citizen, 23 yrs+', costs: 'Last dollar (tuition/fees)' }
                ],
                'Vermont': [
                    { name: '802 Opportunity Grant', type: 'Community College', eligibility: 'Resident, income <$75k', costs: 'Last dollar (tuition)' }
                ],
                'Arizona': [
                    { name: 'Arizona Promise Program', type: 'University', eligibility: 'Resident, GPA, Pell eligible', costs: 'Last dollar (tuition/fees)' }
                ],
                'Colorado': [
                    { name: 'Colorado Promise', type: 'University', eligibility: 'Resident, Income <$90K', costs: 'Tax Credit for tuition/fees' }
                ],
                'Indiana': [
                    { name: '21st Century Scholars', type: 'University', eligibility: 'Resident, citizen, GPA, income <$135K', costs: 'First dollar (tuition/fees)' }
                ],
                'Minnesota': [
                    { name: 'North Star Promise', type: 'University', eligibility: 'Resident, income <$80k', costs: 'Last dollar (tuition/fees)' }
                ],
                'New Mexico': [
                    { name: 'New Mexico Opportunity Scholarship', type: 'University', eligibility: 'Resident', costs: 'First dollar (tuition/fees)' }
                ],
                'New York': [
                    { name: 'Excelsior Scholarship', type: 'University', eligibility: 'Resident, Citizen, HS grad, Income <$125k', costs: 'Last dollar (tuition/fees)' },
                    { name: 'New York State Opportunity Promise Scholarship', type: 'Adult/Age Focused', eligibility: 'Resident, 25-55 yrs', costs: 'Last dollar (tuition/fees/books)' }
                ],
                'Oklahoma': [
                    { name: "Oklahoma's Promise", type: 'University', eligibility: 'Resident, income <$60k', costs: 'Last dollar (tuition/fees)' }
                ],
                'Utah': [
                    { name: 'Utah Promise Grant', type: 'University', eligibility: 'Resident, HS grad', costs: 'Last dollar (tuition/fees)' }
                ],
                'Washington': [
                    { name: 'Washington College Grant/Promise', type: 'University', eligibility: 'Resident, HS grad or adult, Income <$78.5k', costs: 'First dollar (tuition/fees)' }
                ],
                'West Virginia': [
                    { name: 'Promise Scholarship', type: 'University', eligibility: 'Resident, GPA, Test score', costs: 'Last dollar (tuition/fees)' }
                ],
                'Arkansas': [
                    { name: 'Arkansas Future Grant', type: 'Targeted Credential', eligibility: 'Resident, HS grad', costs: 'Last dollar (tuition/fees)' }
                ],
                'Georgia': [
                    { name: 'Hope Grant', type: 'Targeted Credential', eligibility: 'Resident, citizen, GPA', costs: 'First dollar (tuition/fees)' }
                ],
                'Iowa': [
                    { name: 'Future Ready Iowa Last Dollar Scholarship', type: 'Targeted Credential', eligibility: 'Resident, HS grad', costs: 'Last dollar (tuition/fees)' }
                ],
                'Kansas': [
                    { name: 'Promise Scholarship', type: 'Targeted Credential', eligibility: 'Resident, citizen, HS grad, income <$100K', costs: 'Last dollar (tuition/fees)' }
                ],
                'Louisiana': [
                    { name: 'MJ Foster Promise Program', type: 'Targeted Credential', eligibility: 'Resident, HS grad, citizen, 20yrs+', costs: 'Last dollar (tuition/fees/books)' }
                ],
                'South Dakota': [
                    { name: 'Build Dakota Scholarship Fund', type: 'Targeted Credential', eligibility: 'Citizen, CTE career interest', costs: 'First dollar (tuition/fees/books/supplies)' }
                ],
                'Virginia': [
                    { name: 'G3 Program', type: 'Targeted Credential', eligibility: 'In-state eligible, Income <$111K', costs: 'Last dollar (tuition/fees)' }
                ]
            };

            const allStates = [
                'Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware',
                'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky',
                'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota', 'Mississippi',
                'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico',
                'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania',
                'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont',
                'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'
            ];

            const programTypes = [
                { value: 'all', label: 'All Programs', color: '#3b82f6' },
                { value: 'Community College', label: 'Community College', color: '#10b981' },
                { value: 'University', label: 'University (4-Year)', color: '#8b5cf6' },
                { value: 'Targeted Credential', label: 'Targeted Credential', color: '#f59e0b' },
                { value: 'Adult/Age Focused', label: 'Adult/Age Focused', color: '#ef4444' }
            ];

            const getStateColor = (state) => {
                if (!programData[state]) return '#e8e8e8';
                
                const programs = programData[state];
                if (filterType === 'all') {
                    return '#3b82f6';
                } else {
                    const hasType = programs.some(p => p.type === filterType);
                    return hasType ? programTypes.find(t => t.value === filterType).color : '#f5f5f5';
                }
            };

            const getStateOpacity = (state) => {
                if (!programData[state]) return 0.4;
                
                if (filterType === 'all') return 1;
                
                const programs = programData[state];
                const hasType = programs.some(p => p.type === filterType);
                return hasType ? 1 : 0.3;
            };

            const getProgramCount = (type) => {
                let count = 0;
                Object.values(programData).forEach(programs => {
                    if (type === 'all') {
                        count += programs.length;
                    } else {
                        count += programs.filter(p => p.type === type).length;
                    }
                });
                return count;
            };

            const getStateCount = (type) => {
                return Object.keys(programData).filter(state => {
                    if (type === 'all') return true;
                    return programData[state].some(p => p.type === type);
                }).length;
            };

            return (
                <div className="min-h-screen bg-gray-100 p-4">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white border-2 border-gray-300 p-4 mb-4">
                            <div className="mb-4">
                                <h1 className="text-2xl font-bold text-gray-800 mb-1">State Promise Programs Map</h1>
                                <p className="text-sm text-gray-600">Updated December 2025 - Click any state to view programs</p>
                            </div>

                            <div className="flex flex-wrap gap-2 mb-4">
                                {programTypes.map(type => (
                                    <button
                                        key={type.value}
                                        onClick={() => setFilterType(type.value)}
                                        className={`px-3 py-1 text-sm border ${
                                            filterType === type.value
                                                ? 'bg-blue-600 text-white border-blue-700'
                                                : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'
                                        }`}
                                    >
                                        {type.label} ({getStateCount(type.value)} states, {getProgramCount(type.value)} programs)
                                    </button>
                                ))}
                            </div>

                            <div className="border border-gray-300 bg-blue-50 p-3 mb-4 text-sm text-gray-700">
                                <strong>Total:</strong> 36 promise programs across 30 states (Dec 2025 NCSL data)
                            </div>

                            <div className="bg-white border-2 border-gray-400 p-4">
                                <div className="grid grid-cols-5 md:grid-cols-10 gap-2">
                                    {allStates.map(state => {
                                        const color = getStateColor(state);
                                        const opacity = getStateOpacity(state);
                                        const hasPrograms = programData[state];
                                        
                                        return (
                                            <div
                                                key={state}
                                                onClick={() => hasPrograms && setSelectedState(state)}
                                                className={`border-2 border-gray-800 p-2 text-center ${hasPrograms ? 'cursor-pointer hover:brightness-110' : 'cursor-default'} transition`}
                                                style={{ backgroundColor: color, opacity }}
                                            >
                                                <div className="font-bold text-xs text-gray-900">{state}</div>
                                                {hasPrograms && (
                                                    <div className="text-xs text-gray-700 mt-1">
                                                        ({programData[state].length})
                                                    </div>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>

                                <div className="mt-6 flex flex-wrap gap-4 justify-center text-sm">
                                    <div className="flex items-center gap-2">
                                        <div className="w-6 h-4 border border-gray-400" style={{ backgroundColor: '#3b82f6' }}></div>
                                        <span>All Programs</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="w-6 h-4 border border-gray-400" style={{ backgroundColor: '#10b981' }}></div>
                                        <span>Community College</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="w-6 h-4 border border-gray-400" style={{ backgroundColor: '#8b5cf6' }}></div>
                                        <span>University (4-Year)</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="w-6 h-4 border border-gray-400" style={{ backgroundColor: '#f59e0b' }}></div>
                                        <span>Targeted Credential</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="w-6 h-4 border border-gray-400" style={{ backgroundColor: '#ef4444' }}></div>
                                        <span>Adult/Age Focused</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="w-6 h-4 border border-gray-400 bg-gray-300"></div>
                                        <span>No Programs</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {selectedState && programData[selectedState] && (
                            <div className="bg-white border-2 border-gray-400 p-4 mb-4">
                                <div className="flex justify-between items-start mb-3">
                                    <h2 className="text-xl font-bold text-gray-800">{selectedState} Promise Programs</h2>
                                    <button
                                        onClick={() => setSelectedState(null)}
                                        className="text-gray-600 hover:text-gray-800"
                                    >
                                        <XIcon />
                                    </button>
                                </div>
                                
                                <div className="space-y-3">
                                    {programData[selectedState].map((program, idx) => (
                                        <div key={idx} className="border-l-4 p-3 bg-gray-50" style={{ 
                                            borderColor: programTypes.find(t => t.value === program.type)?.color || '#3b82f6'
                                        }}>
                                            <h3 className="font-bold text-gray-900 mb-1">{program.name}</h3>
                                            <p className="text-sm text-gray-700 mb-1">
                                                <span className="font-semibold">Type:</span> {program.type}
                                            </p>
                                            <p className="text-sm text-gray-700 mb-1">
                                                <span className="font-semibold">Eligibility:</span> {program.eligibility}
                                            </p>
                                            <p className="text-sm text-gray-700 mb-1">
                                                <span className="font-semibold">Coverage:</span> {program.costs}
                                            </p>
                                            {program.note && (
                                                <p className="text-sm text-red-700 italic mt-2">
                                                    <span className="font-semibold">Note:</span> {program.note}
                                                </p>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        <div className="bg-white border-2 border-gray-400 p-4">
                            <h3 className="text-lg font-bold text-gray-800 mb-3">Program Statistics by Type</h3>
                            <table className="w-full text-sm">
                                <thead>
                                    <tr className="border-b-2 border-gray-400">
                                        <th className="text-left py-2">Program Type</th>
                                        <th className="text-right py-2">States</th>
                                        <th className="text-right py-2">Programs</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr className="border-b border-gray-200">
                                        <td className="py-2">Community College (2-Year)</td>
                                        <td className="text-right py-2 font-semibold">{getStateCount('Community College')}</td>
                                        <td className="text-right py-2 font-semibold">{getProgramCount('Community College')}</td>
                                    </tr>
                                    <tr className="border-b border-gray-200">
                                        <td className="py-2">University (4-Year)</td>
                                        <td className="text-right py-2 font-semibold">{getStateCount('University')}</td>
                                        <td className="text-right py-2 font-semibold">{getProgramCount('University')}</td>
                                    </tr>
                                    <tr className="border-b border-gray-200">
                                        <td className="py-2">Targeted Credential/Degree</td>
                                        <td className="text-right py-2 font-semibold">{getStateCount('Targeted Credential')}</td>
                                        <td className="text-right py-2 font-semibold">{getProgramCount('Targeted Credential')}</td>
                                    </tr>
                                    <tr className="border-b border-gray-200">
                                        <td className="py-2">Adult/Age Focused</td>
                                        <td className="text-right py-2 font-semibold">{getStateCount('Adult/Age Focused')}</td>
                                        <td className="text-right py-2 font-semibold">{getProgramCount('Adult/Age Focused')}</td>
                                    </tr>
                                    <tr className="font-bold">
                                        <td className="py-2">TOTAL</td>
                                        <td className="text-right py-2">{getStateCount('all')}</td>
                                        <td className="text-right py-2">{getProgramCount('all')}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<PromiseProgramsMap />, document.getElementById('root'));
    </script>
</body>
</html>